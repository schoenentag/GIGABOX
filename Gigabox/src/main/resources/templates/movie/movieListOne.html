<!DOCTYPE html>
<html layout:decorate="~{layout/layout}">
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>
<body>
 <div layout:fragment="content">
     <!-- Anime Section Begin -->
    <section class="anime-details spad">
        <div class="container">
            <div class="anime__details__content">
                <div class="row">
                <input type="hidden" id="key" th:value="${key}">
                <input type="hidden" id="movieCd" th:value="${movieCd}">
                 <div class="col-lg-3">
                        <div class="anime__details__pic set-bg" data-setbg="img/temp/chunsik1.jpg">
                            <div class="comment"><i class="fa fa-comments"></i> 11</div>
                            <div class="view"><i class="fa fa-eye"></i> 9141</div>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="anime__details__text">
                            <div class="anime__details__title">
                                <h3>제목</h3>
                            </div>
                            <div class="anime__details__rating">
                                <div class="rating">
                                    <a href="#"><i class="fa fa-star"></i></a>
                                    <a href="#"><i class="fa fa-star"></i></a>
                                    <a href="#"><i class="fa fa-star"></i></a>
                                    <a href="#"><i class="fa fa-star"></i></a>
                                    <a href="#"><i class="fa fa-star-half-o"></i></a>
                                </div>
                                <span>평점</span>
                            </div>
                            <p>스토리</p>
                            <div class="anime__details__widget">
                                <div class="row">
                                    <div class="col-lg-6 col-md-6">
                                        <ul>
                                            <li><span>Type:</span> TV Series</li>
                                            <li><span>Studios:</span> Lerche</li>
                                            <li><span>Date aired:</span> Oct 02, 2019 to ?</li>
                                            <li><span>Status:</span> Airing</li>
                                            <li><span>Genre:</span> Action, Adventure, Fantasy, Magic</li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <ul>
                                            <li><span>Scores:</span> 7.31 / 1,515</li>
                                            <li><span>Rating:</span> 8.5 / 161 times</li>
                                            <li><span>Duration:</span> 24 min/ep</li>
                                            <li><span>Quality:</span> HD</li>
                                            <li><span>Views:</span> 131,541</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="anime__details__btn">
                                <a href="#" class="follow-btn"><i class="fa fa-heart-o"></i> Follow</a>
                                <a href="#" class="watch-btn"><span>Watch Now</span> <i
                                    class="fa fa-angle-right"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 통계 -->
                
                <div class="chart-view mb-5">
                    <canvas id="test1" style="background-color:white;"></canvas>
                </div>
                <!-- 통계 끝-->
                <!-- 관람평 쓰기 -->
 				<div class="row">
                    <div class="col-lg-8 col-md-8">
                        <div class="anime__details__form">
                            <div class="section-title">
                                <h5>관람평</h5>
                            </div>
                            <form action="#">
                                <textarea placeholder="Your Comment"></textarea>
                                <button type="submit"><i class="fa fa-location-arrow"></i>관람평쓰기</button>
                            </form>
                        </div>
                    </div>
                </div>
                <!--관람평 쓰기 끝 -->
            </div>
        </section>
        <!-- Anime Section End -->
 <!-- chart.js cdn -->
   
<script>
    //웹 로딩 후 바로 실행
    $(document).ready(function(){
        movieListOneCall();
    })
    // 영화진흥위원회 API 호출(상세정보)
    function movieListOneCall(){
        // 이전 페이지에서 key와 movieCd를 받아옴
	    var key = $("#key").val(); 
	    var movieCd = $("#movieCd").val();
	    
	    $.ajax({
	        type:"GET",
	        url:"http://www.kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieInfo.json?key="+key+"&movieCd="+movieCd,
	        data:{},
	        dataType:"json",
	        success:function(response){
	            console.log(response);
	            for(let i in response){
	                let jsonList = response[i].movieInfo;
	                console.log("movieNm : " + jsonList.movieNm); //영화 제목
	                
	                for(let list in jsonList){ 
	                    console.log(jsonList[list]);
	                   
	                    //let title = jsonList[list].movieNm;
	                    //console.log(title);
	                }
	                
	            }
	        },
	        error:function(error){
	            alert("서버호출 실패");
	        }
	    })
    
    }
    
    //관람포인트 
	var ctx = document.getElementById('test1').getContext('2d');
            var chart = new Chart(ctx, { //차트 선언
                type: 'radar', // 차트타입
                data: {
                    labels: ['연출','배우','OST','영상미','스토리'], // 라벨 배열
                    datasets: [{
                        label: '관람 포인트',
                        data: [10,50,70,80,30],
                        backgroundColor: 'rgba(255, 255, 255, 0.2)',
					    borderColor: 'rgb(255, 99, 132)',
					    pointBackgroundColor: 'rgb(255, 99, 132)',
					    pointBorderColor: '#fff',
					    pointHoverBackgroundColor: '#fff',
					    pointHoverBorderColor: 'rgb(255, 99, 132)'
                    }]
                }
            });
</script> 
 </div>

</body>
</html>